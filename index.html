<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Карта импортозамещения нефтегазового оборудования</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  body { margin:0; font-family:Arial,sans-serif; }
  header {
    background:#1f4fa3;
    color:white;
    padding:10px;
    display:flex;
    gap:10px;
    align-items:center;
  }
  #map { height: calc(100vh - 60px); }

  select {
    padding:5px;
    font-size:14px;
  }

  .popup-img {
    width:100%;
    max-width:220px;
    margin-bottom:6px;
    border-radius:4px;
  }
</style>
</head>

<body>

<header>
  Карта импортозамещения
  <select id="typeFilter">
    <option value="all">Все типы</option>
  </select>
  <select id="regionFilter">
    <option value="all">Все регионы</option>
  </select>
</header>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map').setView([60, 90], 4);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'© OpenStreetMap'
}).addTo(map);

// данные заводов
const factories = [
   {
    name: "\ООО «Борец» Продакшн Компани",
    city: "Челябинск",
    region: "Челябинская область",
    type: "Насосное и скважинное оборудование",
    coords: [55.1644,61.4368],
    image: "images/borets.png",
    desc: "Производит газовые стабилизаторы, скважинные насосы и насосное оборудование для нефтегаза.",
  },
  {
    name: "\ЗиО-Подольский машиностроительный завод АО",
    city: "Подольск",
    region: "Московская область",
    type: "Теплообменники и сосуды",
    coords: [55.4227,37.5557],
    image: "images/ziopodolsk.png",
    desc: "Изготавливает теплообменники, сосуды высокого давления и колонное оборудование для нефтегаза.",
  },
  {
    name: "\Казанский компрессорный инженерный завод АО",
    city: "Казань",
    region: "Республика Татарстан",
    type: "Компрессоры",
    coords: [55.7961,49.1064],
    image: "images/compress.png",
    desc: "Производит компрессорное оборудование для нефтегазовой отрасли.",
  },
  {
    name: "\АО Криогенная инженерия (Криогенмаш)",
    city: "Томск",
    region: "Томская область",
    type: "Криогенное оборудование",
    coords: [56.4977,84.9744],
    image: "images/cryo.png",
    desc: "Производит криогенное оборудование, сепараторы и газовое оборудование.",
  },
  {
    name: "\Ижевский нефтяной завод АО",
    city: "Ижевск",
    region: "Удмуртская республика",
    type: "Буровое оборудование",
    coords: [56.8524,53.2045],
    image: "images/izeмv.png",
    desc: "Производит буровые установки, автодолбёжные ключи и буровое оборудование.",
  },
  {
    name: "\Завод нефтегазового оборудования Техновек",
    city: "Нефтеюганск",
    region: "Ханты-Мансийский АО",
    type: "Фильтрационное и трубопроводное оборудование",
    coords: [61.0950,72.6051],
    image: "images/Oil and Gas Equipment Plant Technovec.png",
    desc: "Производит фильтрационное и скважинное оборудование, элементы трубопроводов.",
  },
  {
    name: "Объединённая металлургическая компания АО",
    city: "Челябинск",
    region: "Челябинская область",
    type: "Металлические изделия",
    coords: [55.1644,61.4368],
    image: "images/United Metallurgical Company JSC.png",
    desc: "Производит металлические изделия и трубные компоненты для нефтегаза.",
  },
  {
    name: "\ООО «Идель Нефтемаш»",
    city: "Уфа",
    region: "Республика Башкортостан",
    type: "Буровое оборудование",
    coords: [54.7388,55.9721],
    image: "images/Idel.png",
    desc: "Производит буровые комплексы, системы ремонта скважин.",
  },
  {
    name: "\ООО «Нефтекамский машиностроительный завод специального оборудования»",
    city: "Нефтекамск",
    region: "Республика Башкортостан",
    type: "Циркуляционное и буровое оборудование",
    coords: [56.0914,54.2421],
    image: "images/machine.png",
    desc: "Производит циркуляционные системы, буровое оборудование.",
  },
  {
    name: "\АО \"Волгограднефтемаш\"",
    city: "Волгоград",
    region: "Волгоградская область",
    type: "Насосно-компрессорное оборудование",
    coords: [48.7080,44.5133],
    image: "images/volg.png",
    desc: "Производит насосы, компрессоры и технологическое оборудование.",
  },
  {
    name: "\АО \"Димитровградхиммаш\"",
    city: "Димитровград",
    region: "Ульяновская область",
    type: "Колонное оборудование",
    coords: [54.2204,49.6108],
    image: "images/dmitrov.png",
    desc: "Производит колонное и аппаратное оборудование.",
  },
  {
    name: "\АО \"ГазЭнергоСервис\"",
    city: "Москва",
    region: "Москва",
    type: "КИПиА и принудительное оборудование",
    coords: [55.7558,37.6173],
    image: "images/Gasenerg.png",
    desc: "Производит приборы контроля и автоматизации для нефтегазового оборудования.",
  },
  {
    name: "\Группа ГМС",
    city: "Москва",
    region: "Москва",
    type: "Насосы, компрессоры, нефтегазовые модули",
    coords: [55.7558,37.6173],
    image: "images/GMS.png",
    desc: "Производит насосы, компрессоры и модульные установки для нефтегаза.", 
  },
  {
    name: "Уралхиммаш",
    city: "Екатеринбург",
    region: "Свердловская область",
    type: "Резервуары, теплообменное оборудование",
    coords: [56.8389,60.6057],
    image: "images/uralhim.png",
    desc: "Производит реакторы, емкости, теплообменное и колонное оборудование для нефтегаза.",
  },
  {
    name: "\ГЕОМАШ",
    city: "Москва",
    region: "Москва",
    type: "Буровое оборудование",
    coords: [55.7558,37.6173],
    image: "images/Geomash.png",
    desc: "Производит буровые установки и инструменты для нефтегазовой добычи.",
  }
];
let markers = L.layerGroup().addTo(map);

//фильтры
const typeFilter = document.getElementById("typeFilter");
const regionFilter = document.getElementById("regionFilter");

[...new Set(factories.map(f => f.type))].forEach(t =>
  typeFilter.add(new Option(t, t))
);

[...new Set(factories.map(f => f.region))].forEach(r =>
  regionFilter.add(new Option(r, r))
);

// маркеры
function render() {
  markers.clearLayers();

  factories.forEach(f => {
    if (
      (typeFilter.value !== "all" && f.type !== typeFilter.value) ||
      (regionFilter.value !== "all" && f.region !== regionFilter.value)
    ) return;

    const img = f.image || "images/default.png";

    const popup = `
      <img src="${img}" class="popup-img">
      <b>${f.name}</b><br>
      ${f.city}<br>
      <i>${f.type}</i><br>
      ${f.desc}
    `;

    L.marker(f.coords)
      .addTo(markers)
      .bindPopup(popup);
  });
}

typeFilter.onchange = render;
regionFilter.onchange = render;

render();
</script>

</body>
</html>